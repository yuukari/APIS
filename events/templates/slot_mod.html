{% extends "event_base.html" %}
{% block head %}
{% endblock %}
{% block body %}
<h1 id='title' data-pk='{{ event.pk }}'>New Slot</h1>
<form method="POST" action="{% url "events:new-slot" %}">
{%csrf_token%}
<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Panel</p>
</div>
<div class="col-md-10">
<select class='form-control' name='panel'>
		<option value>-------------</option>
	{% for x in panels %}
		<option value="{{x.pk}}" data-r18="{{x.r18}}">{{x.title}} {% if x.accepted %}[Approved]{% endif %}</option>
	{% endfor %}
</select>
</div>
</div>

<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Label</p>
</div>
<div class="col-md-10">
<input type="text" class="form-control" name='label' placeholder="If panel is selected, leave blank.">
</div>
</div>

<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Setup Notes</p>
</div>
<div class="col-md-10">
<textarea class="form-control" rows='5' name='setup_notes'></textarea>
</div>
</div>

<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Room</p>
</div>
<div class="col-md-10">
<select required class='form-control' id="rooms" name='room'>
</select>
</div>
</div>

<hr>

<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Date/Time Start</p>
</div>
<div class="col-md-6">
<select required class='form-control' id='date' name='date'>
</select>
</div>
<div class="col-md-2">
<select required class='form-control' id='hour' name='hour'>
		<option value="00">00</option>
		<option value="01">01</option>
		<option value="02">02</option>
		<option value="03">03</option>
		<option value="04">04</option>
		<option value="05">05</option>
		<option value="06">06</option>
		<option value="07">07</option>
		<option value="08">08</option>
		<option value="09">09</option>
		<option value="10">10</option>
		<option value="11">11</option>
		<option value="12">12</option>
		<option value="13">13</option>
		<option value="14">14</option>
		<option value="15">15</option>
		<option value="16">16</option>
		<option value="17">17</option>
		<option value="18">18</option>
		<option value="19">19</option>
		<option value="20">20</option>
		<option value="21">21</option>
		<option value="22">22</option>
		<option value="23">23</option>
</select>
</div>
<div class="col-md-2">
<select required class='form-control' id='minute' name='minute'>
	<option value="00">00</option>
	<option value="15">15</option>
	<option value="30">30</option>
	<option value="45">45</option>
</select>
</div>
</div>

<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Duration</p>
</div>
<div class="col-md-10">
<select required class='form-control' name='duration'>
		<option disabled selected value>--------</option>
	{% for x in durations %}
		<option value="{{x.0}}">{{x.1}}</option>
	{% endfor %}
</select>
</div>
</div>

<div class="form-group row">
<div class="col-md-2">
<p class="col-form-label">Setup Time</p>
</div>
<div class="col-md-10">
<select required class='form-control' name='setup_time'>
	{% for x in setup_time %}
		<option value="{{x.0}}">{{x.1}}</option>
	{% endfor %}
</select>
</div>
</div>


<button type="submit" class="btn btn-success btn-block" value="Submit">Add New Slot</button>
</form>
{% endblock %}
{% block scripting %}
<script type="text/javascript">
	$(document).ready(function() {
		$.get('/backend/events/controls/v1/', function(data){
			$.each(data[$("#title").data("pk")].names_full, function(i,o){
				$("#date").append("<option value='"+o[1]+"'>"+o[0]+"</option>");
			});
		});

		$.get('/backend/events/controls/v1/rooms/', function(data){
			$.each(data, function(i,o){
				$("#rooms").append("<option value='"+o.pk+"'>"+o.name+"</option>");
			});
		});
	});
</script>
{% endblock %}
